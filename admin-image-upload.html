 padding: 20px; color: rgba(255, 255, 255, 0.6);"><i class="fas fa-spinner fa-spin" style="margin-right: 10px;"></i> Loading images...</div>';
                
                // Get uploaded images from local storage
                const uploadedImages = JSON.parse(localStorage.getItem('uploaded_images')) || [];
                
                // If no images found, show message
                if (uploadedImages.length === 0) {
                    imageLibrary.innerHTML = '<p style="text-align: center; color: rgba(255, 255, 255, 0.5);">No images uploaded yet. Use the upload tab to add images.</p>';
                    return;
                }
                
                // Group images by folder
                const imagesByFolder = {};
                
                uploadedImages.forEach(image => {
                    const folder = image.path.split('/').slice(0, -1).join('/');
                    
                    if (!imagesByFolder[folder]) {
                        imagesByFolder[folder] = [];
                    }
                    
                    imagesByFolder[folder].push(image);
                });
                
                // Clear library
                imageLibrary.innerHTML = '';
                
                // Display images by folder
                Object.keys(imagesByFolder).forEach(folder => {
                    const folderImages = imagesByFolder[folder];
                    
                    // Create folder section
                    const folderSection = document.createElement('div');
                    folderSection.className = 'folder-section';
                    
                    // Create folder header
                    const folderHeader = document.createElement('h3');
                    folderHeader.textContent = folder.split('/').pop();
                    folderHeader.style.marginTop = '20px';
                    folderHeader.style.marginBottom = '15px';
                    folderHeader.style.color = 'rgba(255, 255, 255, 0.9)';
                    
                    folderSection.appendChild(folderHeader);
                    
                    // Create image grid
                    const imageGrid = document.createElement('div');
                    imageGrid.className = 'image-library';
                    
                    // Add images to grid
                    folderImages.forEach(image => {
                        const imageItem = createImageItem(image);
                        imageGrid.appendChild(imageItem);
                    });
                    
                    folderSection.appendChild(imageGrid);
                    imageLibrary.appendChild(folderSection);
                });
            }
            
            // Create image item for library
            function createImageItem(image) {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                
                // Create image
                const img = document.createElement('img');
                img.src = image.url;
                img.alt = image.name;
                img.loading = 'lazy';
                
                // Create overlay
                const overlay = document.createElement('div');
                overlay.className = 'image-overlay';
                
                // Create image name
                const imageName = document.createElement('div');
                imageName.className = 'image-name';
                imageName.textContent = image.name;
                
                overlay.appendChild(imageName);
                
                // Create URL field for copying
                const urlField = document.createElement('input');
                urlField.type = 'text';
                urlField.className = 'image-url-field';
                urlField.value = image.url;
                urlField.id = `url-${image.path.replace(/[^a-z0-9]/gi, '-')}`;
                
                // Create actions
                const actions = document.createElement('div');
                actions.className = 'image-actions';
                
                // Copy URL button
                const copyButton = document.createElement('div');
                copyButton.className = 'image-action';
                copyButton.innerHTML = '<i class="fas fa-link"></i>';
                copyButton.title = 'Copy URL';
                
                copyButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // Copy URL to clipboard
                    const urlField = document.getElementById(`url-${image.path.replace(/[^a-z0-9]/gi, '-')}`);
                    urlField.select();
                    document.execCommand('copy');
                    
                    // Show success message
                    const copySuccess = document.createElement('div');
                    copySuccess.className = 'copy-success';
                    copySuccess.textContent = 'URL copied!';
                    
                    this.appendChild(copySuccess);
                    copySuccess.classList.add('active');
                    
                    setTimeout(() => {
                        copySuccess.classList.remove('active');
                        setTimeout(() => {
                            this.removeChild(copySuccess);
                        }, 300);
                    }, 2000);
                });
                
                // Delete button
                const deleteButton = document.createElement('div');
                deleteButton.className = 'image-action delete';
                deleteButton.innerHTML = '<i class="fas fa-trash"></i>';
                deleteButton.title = 'Delete';
                
                deleteButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    if (confirm(`Are you sure you want to delete ${image.name}?`)) {
                        // Delete image from local storage
                        deleteUploadedImage(image.path);
                        
                        // Remove element from DOM
                        imageItem.remove();
                        
                        // Show notification
                        showNotification(`Deleted ${image.name}`, 'success');
                    }
                });
                
                actions.appendChild(copyButton);
                actions.appendChild(deleteButton);
                
                // Add event listeners
                imageItem.addEventListener('click', function() {
                    // Preview image
                    window.open(image.url, '_blank');
                });
                
                // Append elements
                imageItem.appendChild(img);
                imageItem.appendChild(overlay);
                imageItem.appendChild(urlField);
                imageItem.appendChild(actions);
                
                return imageItem;
            }
            
            // Delete uploaded image from local storage
            function deleteUploadedImage(path) {
                // Get existing uploaded images
                const uploadedImages = JSON.parse(localStorage.getItem('uploaded_images')) || [];
                
                // Filter out the deleted image
                const filteredImages = uploadedImages.filter(img => img.path !== path);
                
                // Save back to local storage
                localStorage.setItem('uploaded_images', JSON.stringify(filteredImages));
            }
            
            // Add sample images if none exist
            function addSampleImages() {
                const uploadedImages = JSON.parse(localStorage.getItem('uploaded_images')) || [];
                
                if (uploadedImages.length === 0) {
                    // Use a default image for samples
                    const defaultImage = 'https://raw.githubusercontent.com/Taikibonnet/TedouaR-robotic-HUB/main/images/hero-robot.png';
                    
                    // Sample images
                    const sampleImages = [
                        {
                            path: 'images/uploads/sample_upload_1.jpg',
                            url: defaultImage,
                            name: 'sample_upload_1.jpg',
                            timestamp: new Date().getTime() - 86400000 // Yesterday
                        },
                        {
                            path: 'images/uploads/sample_upload_2.jpg',
                            url: defaultImage,
                            name: 'sample_upload_2.jpg',
                            timestamp: new Date().getTime() - 172800000 // 2 days ago
                        },
                        {
                            path: 'images/robots/robot_1.jpg',
                            url: defaultImage,
                            name: 'robot_1.jpg',
                            timestamp: new Date().getTime() - 259200000 // 3 days ago
                        },
                        {
                            path: 'images/robots/robot_2.jpg',
                            url: defaultImage,
                            name: 'robot_2.jpg',
                            timestamp: new Date().getTime() - 345600000 // 4 days ago
                        }
                    ];
                    
                    // Save to local storage
                    localStorage.setItem('uploaded_images', JSON.stringify(sampleImages));
                }
            }
            
            // Tab switching
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to current tab and content
                    this.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // If switching to library tab, load images
                    if (tabId === 'library') {
                        loadImageLibrary();
                    }
                });
            });
            
            // Refresh library button
            const refreshLibraryBtn = document.getElementById('refresh-library');
            refreshLibraryBtn.addEventListener('click', loadImageLibrary);
            
            // Initialize
            addSampleImages();
            
            // If on library tab, load images
            if (document.querySelector('.tab[data-tab="library"]').classList.contains('active')) {
                loadImageLibrary();
            }
        });
    </script>
</body>
</html>